{{- $githubBase := "https://github.com/pjpscriv/pjpscriv.github.io" -}}
{{- $githubUrl := $githubBase -}}
{{- $linkText := i18n "footer.view_on" -}}

{{- if .File -}}
  {{/* Page has a source file */}}
  {{- $filePath := replace .File.Path "\\" "/" -}}
  {{- $githubUrl = printf "%s/edit/main/content/%s/%s?plain=1" $githubBase .Site.LanguageCode $filePath -}}
  {{- $linkText = i18n "footer.edit_on" -}}
{{- else if .Section -}}
  {{/* List page for a section */}}
  {{- $githubUrl = printf "%s/tree/main/content/%s/%s" $githubBase .Site.LanguageCode .Section -}}
{{- else if eq .RelPermalink "/" -}}
  {{/* Homepage */}}
  {{- $githubUrl = printf "%s/blob/main/layouts/index.html" $githubBase -}}
{{- end -}}

<footer>
  <div class="footer__links">
    <ul class="social-links">
      {{- range .Site.Data.social }}
      <li>
        {{- $Url := cond (and (eq .title "RSS") (ne $.Site.LanguageCode "en")) (printf "/%s%s" $.Site.LanguageCode .url) .url -}}
        {{/*  {{- $Url := .url -}}  */}}
        <a class="icon-link" href="{{- $Url -}}" target="_blank" {{ if eq .title "Mastodon" }}rel="me"{{ end }}>
          {{ .svg | safeHTML -}}
        </a>
      </li>
      {{- end -}}
    </ul>
    <p>Â© <span id="copyright-year">{{ now.Year }}</span> {{ .Site.Title }} â€¢ ðŸ’»ðŸŒ±</p>
    <p>{{- i18n "footer.powered_by" -}} <a href="https://gohugo.io" target="_blank">Hugo</a> â€¢ {{ $linkText }} <a href="{{- $githubUrl -}}" target="_blank" rel="noopener noreferrer">GitHub</a></p>
  </div>
  <div class="footer__sitemap">
    <div class="footer__sitemap-group">
      <p><a href="{{- "now" | relLangURL -}}">{{- i18n "nav.now" -}}</a></p>
      <p><a href="{{- "about" | relLangURL -}}">{{- i18n "nav.about" -}}</a></p>
      <p><a href="{{- "admiration" | relLangURL -}}">{{- i18n "nav.admiration" -}}</a></p>
    </div>
    <div class="footer__sitemap-group">
      <p><a href="{{- "projects" | relLangURL -}}">{{- i18n "nav.projects" -}}</a></p>
      <p><a href="{{- "data-viz" | relLangURL -}}">{{- i18n "nav.data-viz" -}}</a></p>
      <p><a href="{{- "writing" | relLangURL -}}">{{- i18n "nav.writing" -}}</a></p>
    </div>
  </div>
</footer>