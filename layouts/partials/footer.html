{{- $githubBase := "https://github.com/pjpscriv/pjpscriv.github.io" -}}
{{- $viewLink := $githubBase -}}
{{- $editLink := "" -}}
{{- $hasEditLink := false -}}

{{- if .File -}}
  {{/* Page has a source file */}}
  {{- $filePath := replace .File.Path "\\" "/" -}}
  {{- $viewLink = printf "%s/blob/main/content/%s/%s" $githubBase .Site.LanguageCode $filePath -}}
  {{- $editLink = printf "%s/edit/main/content/%s/%s?plain=1" $githubBase .Site.LanguageCode $filePath -}}
{{- else if .Section -}}
  {{/* List page for a section */}}
  {{- $viewLink = printf "%s/tree/main/content/%s/%s" $githubBase .Site.LanguageCode .Section -}}
{{- else if eq .RelPermalink "/" -}}
  {{/* Homepage */}}
  {{- $viewLink = printf "%s/blob/main/layouts/index.html" $githubBase -}}
{{- end -}}

<footer>
  <div class="footer__links">
    <ul class="social-links">
      {{- range .Site.Data.social }}
      <li>
        {{- $Url := cond (and (eq .title "RSS") (ne $.Site.LanguageCode "en")) (printf "/%s%s" $.Site.LanguageCode .url) .url -}}
        <a class="icon-link" href="{{- $Url -}}" target="_blank" {{ if eq .title "Mastodon" }}rel="me"{{ end }}>
          {{ .svg | safeHTML -}}
        </a>
      </li>
      {{- end -}}
    </ul>
    <p>¬© <span id="copyright-year">{{ now.Year }}</span> {{ .Site.Title }} ‚Ä¢ üíªüå±</p>
    <p>
      {{- i18n "footer.powered_by" -}} <a href="https://gohugo.io" target="_blank">Hugo</a> ‚Ä¢ 
      {{ i18n "footer.code_on" }} <a href="{{- $viewLink -}}" target="_blank" rel="noopener noreferrer">GitHub</a>
      {{ if $editLink }} ‚Ä¢ ‚úèÔ∏è<a href="{{- $editLink -}}">{{ i18n "footer.edit"}}</a>{{ end }}
    </p>
  </div>
  <div class="footer__sitemap">
    <div class="footer__sitemap-group">
      <p><a href="{{- "now" | relLangURL -}}">{{- i18n "nav.now" -}}</a></p>
      <p><a href="{{- "about" | relLangURL -}}">{{- i18n "nav.about" -}}</a></p>
      <p><a href="{{- "projects" | relLangURL -}}">{{- i18n "nav.projects" -}}</a></p>
    </div>
    <div class="footer__sitemap-group">
      <p><a href="{{- "data-viz" | relLangURL -}}">{{- i18n "nav.data-viz" -}}</a></p>
      <p><a href="{{- "writing" | relLangURL -}}">{{- i18n "nav.writing" -}}</a></p>
      <p><a href="{{- "notes" | relLangURL -}}">{{- i18n "nav.notes" -}}</a></p>
    </div>
  </div>
</footer>